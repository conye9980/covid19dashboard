<html>
<head>
<title>Graphing the daily Irish COVID swab tests results against positivity rates</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>
</head>
<body>
  <canvas id="ROIChartBar"></canvas>
  <script type="text/javascript">
            var ctx = document.getElementById('ROIChartBar').getContext('2d');
            var data = [
				{date: new Date('2021-01-06'), positiveSwabs: 6865, totalSwabs: 28370},
				{date: new Date('2021-01-07'), positiveSwabs: 6368, totalSwabs: 28610},
				{date: new Date('2021-01-08'), positiveSwabs: 5156, totalSwabs: 27319},
				{date: new Date('2021-01-09'), positiveSwabs: 5099, totalSwabs: 29972},
				{date: new Date('2021-01-10'), positiveSwabs: 4188, totalSwabs: 24485},
				{date: new Date('2021-01-11'), positiveSwabs: 2922, totalSwabs: 19794},
				{date: new Date('2021-01-12'), positiveSwabs: 2521, totalSwabs: 18945},
				{date: new Date('2021-01-13'), positiveSwabs: 3932, totalSwabs: 24583},
				{date: new Date('2021-01-14'), positiveSwabs: 3854, totalSwabs: 28178},
				{date: new Date('2021-01-15'), positiveSwabs: 3416, totalSwabs: 23033},
				{date: new Date('2021-01-16'), positiveSwabs: 3110, totalSwabs: 26663},
				{date: new Date('2021-01-17'), positiveSwabs: 2868, totalSwabs: 21441},
				{date: new Date('2021-01-18'), positiveSwabs: 1877, totalSwabs: 18191},
				{date: new Date('2021-01-19'), positiveSwabs: 1784, totalSwabs: 19218},
				{date: new Date('2021-01-20'), positiveSwabs: 2786, totalSwabs: 24296},
				{date: new Date('2021-01-21'), positiveSwabs: 2318, totalSwabs: 23196},
				{date: new Date('2021-01-22'), positiveSwabs: 2084, totalSwabs: 24189},
				{date: new Date('2021-01-23'), positiveSwabs: 1926, totalSwabs: 21492},
				{date: new Date('2021-01-24'), positiveSwabs: 1529, totalSwabs: 19593},
				{date: new Date('2021-01-25'), positiveSwabs: 1085, totalSwabs: 14884},
				{date: new Date('2021-01-26'), positiveSwabs: 953, totalSwabs: 16665},
				{date: new Date('2021-01-27'), positiveSwabs: 1668, totalSwabs: 22387},
				{date: new Date('2021-01-28'), positiveSwabs: 1587, totalSwabs: 21780},
				{date: new Date('2021-01-29'), positiveSwabs: 1483, totalSwabs: 21943},
				{date: new Date('2021-01-30'), positiveSwabs: 1421, totalSwabs: 21598},
				{date: new Date('2021-01-31'), positiveSwabs: 1153, totalSwabs: 17649},
				{date: new Date('2021-02-01'), positiveSwabs: 831, totalSwabs: 15047},
				{date: new Date('2021-02-02'), positiveSwabs: 969, totalSwabs: 16329},
				{date: new Date('2021-02-03'), positiveSwabs: 1203, totalSwabs: 18352},
				{date: new Date('2021-02-04'), positiveSwabs: 1283, totalSwabs: 20214},
				{date: new Date('2021-02-05'), positiveSwabs: 1009, totalSwabs: 20190},
				{date: new Date('2021-02-06'), positiveSwabs: 1074, totalSwabs: 19248},
				{date: new Date('2021-02-07'), positiveSwabs: 956, totalSwabs: 15377},
				{date: new Date('2021-02-08'), positiveSwabs: 780, totalSwabs: 12697},
				{date: new Date('2021-02-09'), positiveSwabs: 816, totalSwabs: 15126}
            ];
            var labels = new Array();
            var positiveSwabs = new Array();
            var negativeSwabs = new Array();
            var percentagePositive = new Array();
            data.forEach(function (value, index) {
            	labels.push(value.date.toDateString());
            	positiveSwabs.push(value.positiveSwabs);
            	negativeSwabs.push(value.totalSwabs - value.positiveSwabs);
            	percentagePositive.push((value.positiveSwabs * 100) / value.totalSwabs);
            });
        var ROIChartt = new Chart(ctx, {
           "type":"bar",
           "data":{
              labels: labels,
              "datasets":[
                 {
                    "label":"Positive Swabs",
                    "data": positiveSwabs,
                    "backgroundColor":"rgba(237, 100, 127, .55)",
                    "borderColor":"rgba(233,0,45, 1)",
                    "borderWidth":0,
                    "yAxisID": "A"
                 },
                 {
                    "label":"Negative Swabs",
                    "data": negativeSwabs,
                    "backgroundColor":"rgba(63, 63, 191, .4)",
                    "borderColor":"rgba(14, 54, 201, 0.5)",
                    "borderWidth":0,
                    "yAxisID": "A"
                 },
                 {
                    "label": "% Positive",
                    "data": percentagePositive,
                    "borderColor":"red",
                    "borderWidth":0,
                    "yAxisID": "B",
                    "type": "line"
                 }
              ]
           },
           "options":{
              "scales":{
                 "xAxes":[
                    {
                       "stacked":true
                    }
                 ],
                 "yAxes":[
                    {
                        "id": "A",
                       "stacked":true,
                      "position": "left",
                       "ticks":{
                          "beginAtZero":true,
                          "max": 35000
                       }

                    },
                    {
                      "id": "B",
                      "position": "right",
                      "ticks":{
                          "beginAtZero":true,
                          "max": 35
                       }

                    }
                 ]
              }
           }
        });

  </script>
</body>
</html>
